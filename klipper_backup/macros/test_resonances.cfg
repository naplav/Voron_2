[gcode_macro TEST_RESONANCES_X]
description: "Test resonance on x axe and generate graphs"
gcode:
    TEST_RESONANCES AXIS=X
    RUN_SHELL_COMMAND CMD=generate_resonance_graph_x

[gcode_macro TEST_RESONANCES_Y]
description: "Test resonance on y axe and generate graph"
gcode:
    TEST_RESONANCES AXIS=Y
    RUN_SHELL_COMMAND CMD=generate_resonance_graph_y

[gcode_shell_command generate_resonance_graph_x]
command: ~/klipper/scripts/calibrate_shaper.py /tmp/resonances_x_*.csv -o ~/klipper/resonances/shaper_calibrate_x.png
timeout: 10.
verbose: True

[gcode_shell_command generate_resonance_graph_y]
command: ~/klipper/scripts/calibrate_shaper.py /tmp/resonances_y_*.csv -o ~/klipper/resonances/shaper_calibrate_y.png
timeout: 10.
verbose: True